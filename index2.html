<!DOCTYPE html>
<html lang="">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://fonts.googleapis.com/css2?family=Oswald&display=swap" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="style.css">
        <link rel="shortcut icon" href="logo.png"/>
        <title>TaskUp</title>
        <style>
          body {
            font-family: 'Oswald', sans-serif;
            padding: 5%;
            background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.8)), url(mainbg.jpg);
            height: 100vh;
            -webkit-background-size: cover;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
          }
          h1 {
            color: yellow;
            text-align: center;
            background-color: black;
          }
          h2 {
            color: white;
          }
          input[type=text], select {
            width: 100%;
            padding: 12px 20px;
            margin: 8px 0;
            display: inline-block;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
          }

          .button {
            background-color: #4CAF50; /* Green */
            border: none;
            color: white;
            padding: 16px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            transition-duration: 0.4s;
            cursor: pointer;
          }
        </style>
    </head>
    <body>
        <h1>TaskUp</h1>
      
        <h2>Add Task:</h2>

        <div id="addTaskForm">
          <form>
            <div class="task">
              <input type="text" id="taskName" placeholder="Task Name">
              <input type="text" id="taskDuration" placeholder="Duration">
              <!-- adding duration -->
              <select id="durationUnit">
                  <option value="minutes">Minutes</option>
                  <option value="hours">Hours</option>
              </select>
              <!-- adding the task dependency -->
              <select id="taskDependency">
                  <option value="">Dependency</option>
              </select>            
            </div>
          </form>
          <button class="button button1" onclick="addTask()">Add</button>
        </div>

        <h2>Tasks:</h2>
        <div id="addTaskForm">
          <form>
            <!-- task container-->
            <div id="taskContainer">
              
            </div>

            <!-- sorted task will appear here -->
            <div id="sortedtaskContainer"></div>
          </form>
        </div>

        <!-- choose first & last task-->
        <h2>Task Order</h2>
        
        <div id="addTaskForm">
          <form>
            <div>
              <label for="firstTask">First Task:</label>
              <select id="firstTask"></select>
            </div>
            <div>
              <label for="endTask">End Task:</label>
              <select id="endTask"></select>
            </div>
          </form>
          <button class="button button2" onclick="sortTasks()">Sort Tasks</button>
        </div>

        <!--path-->
        <h2>Sorted Tasks:</h2>

        <div id="addTaskForm">
          <form>
            <div id="sortedTasksContainer"></div>
          </form>
        </div>

        <div>

        </div>
        <!-- total duration-->
        <div id="totalTime">
          <form>
            <h3>Total Duration:
                <span id="totalDuration"></span>
            </h3>
          </form>
        </div>

        <div></div>

        <script>
  // Place your JavaScript code here
  // STORE THE TASKS
  let tasks = [];



  // add task function
  function addTask() {
    const taskName = document.getElementById("taskName").value;
    let taskDuration = document.getElementById("taskDuration").value;
    const durationUnit = document.getElementById("durationUnit").value;
    const taskDependency = document.getElementById("taskDependency").value;

    let task = {
      name: taskName,
      duration: taskDuration,
      durationUnit: durationUnit,
      dependency: taskDependency,
    };

    tasks.push(task);
    console.log(tasks)
    updateDependencyDropdown();
    renderTasks(tasks, "taskContainer");


  }

  function updateDependencyDropdown() {
    const taskDependencyDropdown = document.getElementById("taskDependency");

    const firstTaskDropdown = document.getElementById("firstTask");
    const endTaskDropdown = document.getElementById("endTask");

    // Clear existing options
    taskDependencyDropdown.innerHTML = "";
    firstTaskDropdown.innerHTML = "";
    endTaskDropdown.innerHTML = "";

    // Add new options
    const noDependencyOption = document.createElement("option");
    noDependencyOption.value = "";
    noDependencyOption.textContent = "Dependency";
    taskDependencyDropdown.appendChild(noDependencyOption);

    tasks.forEach(function (task) {
      let option = document.createElement("option");
      option.value = task.name;
      option.textContent = task.name;

      taskDependencyDropdown.appendChild(option);

      let firstTaskOption = document.createElement("option");
      firstTaskOption.value = task.name;
      firstTaskOption.textContent = task.name;

      firstTaskDropdown.appendChild(firstTaskOption);

      let endTaskOption = document.createElement("option");
      endTaskOption.value = task.name;
      endTaskOption.textContent = task.name;

      endTaskDropdown.appendChild(endTaskOption);
    });
  }

  // RENDER THE INPUT TASKS IN THE CONTAINER
  function renderTasks(tasks, containerId) {
    let taskContainer = document.getElementById(containerId);
    taskContainer.innerHTML = "";

    tasks.forEach(function (task) {
      let taskElement = document.createElement("div");
      taskElement.classList.add("task");

      let taskNameElement = document.createElement("span");
      taskNameElement.textContent = task.name;

      let taskDurationElement = document.createElement("span");
      taskDurationElement.textContent = task.duration;

      let taskDependencyElement = document.createElement("span");
      taskDependencyElement.textContent = task.dependency;

      // edit
      let editButton = document.createElement("button");
      editButton.textContent = "Edit";
      editButton.addEventListener("click", function () {});

      // delete
      let deleteButton = document.createElement("button");
      deleteButton.textContent = "Delete";
      deleteButton.addEventListener("click", function () {});

      taskElement.appendChild(taskNameElement);
      taskElement.appendChild(taskDurationElement);
      taskElement.appendChild(taskDependencyElement);
      taskElement.appendChild(editButton);
      taskElement.appendChild(deleteButton);

      taskContainer.appendChild(taskElement);
    });
  }
  
        </script>
    </body>
</html>
